<!doctype html>
<html lang="en">
	<head>
	<meta charset="utf-8">
	<title>jQuery UI ProgressBar functionality</title>
	<link href="http://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel="stylesheet">
	<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
	<script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
	<style>

	.ui-widget-header {
		background: #cedc98;
		border: 1px solid #DDDDDD;
		color: #333333;
		font-weight: bold;
	}

	#principal_container{
		border:1px solid red;
	}

	</style>

	<script>


		loadBar('prueba',3)

		function loadBar(id,time)
		{
		  time_seg = time;
		  total_timer = time_seg * 1000;
		  
		  myinterval = setInterval(RunTimer,total_timer/100);
		  cont_prueba = 0 
		  view_id = id
		}



		function RunTimer()
		{
			updateProcessbar()
			if (cont_prueba<90)
			{
				updateProcessbar(view_id,cont_prueba)
				cont_prueba ++;
			}
			else{
				clearInterval(myinterval);
				myinterval2 = setInterval(RunTimer2, total_timer/10);
			}
		}

		function RunTimer2()
		{
			if (cont_prueba<100)
			{
				updateProcessbar(view_id,cont_prueba)
				cont_prueba ++;
			}
			else
				clearInterval(myinterval2);
		}



		function updateProcessbar(id,cont)
		{
			$( "#"+id+"_progressbar" ).progressbar({
			    value: cont
			});
			console.log('value process bar-->',cont);
			$("#"+id+"_progresstext").html('Process:' + String(cont));
		}


	</script>
	</head>
	<body> 


	<div id='principal_container'>
		<div id='prueba_progresstext'></div>
		<div id="prueba_progressbar"></div> 
	</div>
	</body>
</html>
